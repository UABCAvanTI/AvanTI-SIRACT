<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/Template/MasterTemplate.xhtml">
    <ui:define name="contenido">
        <f:view contentType="text/html">   
            <h:head>
                <h:outputStylesheet name="Style_botones.css" library="css"/>
                <f:facet name="first">
                    <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                    <title>Campus</title>
                </f:facet>
            </h:head>
            <!--<h:body> --> 
                <h:body onload="#{campusBeanUI.filtrado()}"> 
                <h:form id="frmCampus">
                    <p:fieldset style="color:" legend="Administracion de Campus">

                        <p:commandButton id="showAltaButton" image="btnAU" title="Captura de Campus" oncomplete="dlgCapturaCampus.show();" iconPos="center" actionListener="#{campusBeanUI.nuevo}" update="capCampus"/>
                        <p:commandButton id="showEliminarButton" image="btnEU" title="Elimina Campus" oncomplete="dlgCapturaCampus.show();" iconPos="center" actionListener="#{campusBeanUI.eliminar}" update="capCampus"/>
                        <p:commandButton id="showMostrarButton" image="btnMU" title="Modifica Campus" oncomplete="dlgCapturaCampus.show();" iconPos="center" actionListener="#{campusBeanUI.modificar()}" update="capCampus"/>

                        <div style="text-align: right">
                            <p:outputLabel style="font-size: 19px" value="Busqueda especifica de Campus: "/>
                            <p:inputText id="filtro"    
                                         value="#{campusBeanUI.busqueda}" 
                                         autocomplete="off"
                                         label="filtrado">
                                <p:ajax event="keyup"  listener="#{campusBeanUI.filtrado()}" 
                                        update="tbCampus" />
                            </p:inputText>
                            <pe:keyFilter for="filtro" regEx="/[a-z''A-Z]/"/>
                        </div>
                        
                        <center>
                            <p:outputLabel style="font-size: 23px" value="Campus"/><br/>
                        </center>
                     
                         <p:growl id="idgrowl" showDetail="true" sticky="true" life="10000"/>  
                         
                        <!-- inicio de la tabla donde se muestran los datos-->
                        <p:dataTable id="tbCampus" var="campus" 
                                     value="#{campusBeanUI.listaFiltrada}"
                                     rowKey="#{campus.camid}"
                                     selection="#{campusBeanUI.campusBeanHelper.selectedCampus}"
                                     selectionMode="single"
                                     rows="10"
                                     rowsPerPageTemplate="5,10,15,20"
                                     paginator="true" 
                                     paginatorTemplate="{CurrentPageReport}
                                     {FirstPageLink} {PreviousPageLink} {PageLinks} 
                                     {NextPageLink} {LastPageLink} 
                                     {RowsPerPageDropdown}"
                                     currentPageReportTemplate="({currentPage} de {totalPages})"> 

<!--                            <p:column selectionMode="multiple"
                                      style="width:16px;text-align:center">       
                            </p:column>-->
                            
                            <p:column headerText="Lista de Campus">
                                <h:outputText value="#{campus.camnombre}" /> 
                            </p:column> 
                        </p:dataTable>
                        <!-- fin de la tabla-->

                        <!--inicio agregar, modificar y eliminar-->
                        <p:dialog id="capCampus" header="#{campusBeanUI.header}" widgetVar="dlgCapturaCampus" appendToBody="false" modal="true">  
                            <p:panelGrid id="capCam" style="margin-top: 20px; position: relative"> 
                                <p:row>
                                    <p:column><p:outputLabel value="Campus"/></p:column>
                                    <p:column><p:inputText id="ca" onkeyup="value = value.toUpperCase()" 
                                                           value="#{campusBeanUI.campusBeanHelper.campus.camnombre}"
                                                           disabled="#{campusBeanUI.deshabilitar}"/>
                                        <pe:keyFilter for="ca" regEx="/[a-z ]/"/>
                                    </p:column>
                                 </p:row>
                                
                            </p:panelGrid> 
                            <br/>
                            <br/>
                            <p:commandButton value="Aceptar" image="btnGuardar"  oncomplete="dlgCapturaCampus.hide()" action="#{campusBeanUI.onClickSubmit()}" update=":frmCampus:idgrowl,capCam,:frmCampus:tbCampus" icon="ui-icon-disk">
                                <p:confirm header="Confirmación" message="¿Está seguro de querer guardar los cambios?" icon="ui-icon-alert" />
                            </p:commandButton>
                            <!-- confirmacion de eliminar-->
                             <!-- confirmacion de modificacion-->
                            <p:commandButton value="Cancelar" image="btnCancelar" oncomplete="dlgCapturaCampus.hide()"/>  
                        </p:dialog>
                        <!--fin agregar y modificar-->
                    </p:fieldset>
                </h:form> 
                <p:confirmDialog showEffect="fade" hideEffect="explode" 
                                 widgetVar="conDlgElim" header="Confirmacion" 
                                 message="¿Estas seguro de eliminar el registro?"
                                 severity="alert" appendToBody="true">
                    <h:form>
                        <p:commandButton value="Aceptar" action="#{campusBeanUI.eliminConfir()}"
                                         icon="ui-icon-check"
                                         update=":frmCampus:idgrowl,:frmCampus:tbCampus,:frmCampus:capCam">
                            <p:ajax></p:ajax>

                        </p:commandButton>
                        <p:commandButton value="Cancelar" oncomplete="conDlgElim.hide()"
                                         icon="ui-icon-close"/> 
                    </h:form>
                </p:confirmDialog>
                <!-- fin de confirmacion de eliminar-->
                <!-- confirmacion de modificacion-->
                 <p:confirmDialog showEffect="fade" hideEffect="explode" 
                                 widgetVar="conDlgModif" header="Confirmacion" 
                                 message="¿Estas seguro de modificar el registro?"
                                 severity="alert" appendToBody="true">
                    <h:form>
                        <p:commandButton value="Aceptar" action="#{campusBeanUI.modifConfir()}"
                                         icon="ui-icon-check"
                                         update=":frmCampus:idgrowl,:frmCampus:tbCampus,:frmCampus:capCam">
                            <p:ajax></p:ajax>

                        </p:commandButton>
                        <p:commandButton value="Cancelar" oncomplete="conDlgModif.hide()"
                                         icon="ui-icon-close"/> 
                    </h:form>
                </p:confirmDialog>

            </h:body>
        </f:view>
    </ui:define>
</ui:composition>